<table align="right">
  <tr>
    <td>
      <a href="readme-en.md">Portuguese</a>
    </td>
  </tr>
  <tr>
    <td>
      <a href="README.md">üáßüá∑ Portugu√™s</a>
    </td>
  </tr>
</table>

![luk4x-repo-status](https://img.shields.io/badge/status-developing-lightgrey?style=for-the-badge&logo=headspace&logoColor=yellow&color=lightgrey)
![luk4x-repo-license](https://img.shields.io/github/license/Luk4x/apple-store?style=for-the-badge&logo=unlicense&logoColor=lightgrey)
## Plataforma de cobran√ßa 

<br>
<p align="center">
  <a href="#-tecnologias-utilizadas">Tecnologias</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
  <a href="#%EF%B8%8F-etapas">Etapas</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
  <a href="#-sobre">Sobre</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
  <a href="#-p√°ginas-e-rotas">P√°ginas</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
  <a href="#-demais-componentes">Componentes</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
</p>
<br>




## üöÄ Tecnologias Utilizadas

> Abaixo est√£o as 8 tecnologias utilizadas no desenvolvimento do projeto, e o motivo de us√°-las.

<table align="center">
  <tr>
     <td align="center">
      <a href="https://git-scm.com/book/pt-br/v2/Come%C3%A7ando-O-B%C3%A1sico-do-Git">
        <img src="https://skillicons.dev/icons?i=git" width="65px" alt="NodeJs icon"/><br>
        <sub>
          <b>
            <pre>GIT</pre>
          </b>
        </sub>
      </a>
      <h6>
        <details>
          <summary>Motivo</summary>
          <br/>
          <i>Facilidade no controle de vers√µes e trabalho em equipe.</i>
        </details>
      </h6>
    </td>
     <td align="center">
      <a href="https://mui.com/material-ui/getting-started/">
        <img src="https://skillicons.dev/icons?i=materialui" width="65px" alt="NodeJs icon"/><br>
        <sub>
          <b>
            <pre>MaterialUI</pre>
          </b>
        </sub>
      </a>
      <h6>
        <details>
          <summary>Motivo</summary>
          <br/>
          <i>Agilidade na constru√ß√£o de designs limpos.</i>
        </details>
      </h6>
    </td>
    <td align="center">
      <a href="https://www.postgresql.org/docs/">
        <img src="https://skillicons.dev/icons?i=postgres" width="65px" alt="NodeJs icon"/><br>
        <sub>
          <b>
            <pre>postgres</pre>
          </b>
        </sub>
      </a>
      <h6>
        <details>
          <summary>Motivo</summary>
          <br/>
          <i>Confiabilidade, desempenho e durabilidade.</i>
        </details>
      </h6>
    </td>
     <td align="center">
      <a href="https://docs.npmjs.com/">
        <img src="https://skillicons.dev/icons?i=nodejs" width="65px" alt="NodeJs icon"/><br>
        <sub>
          <b>
            <pre>Node</pre>
          </b>
        </sub>
      </a>
      <h6>
        <details>
          <summary>Motivo</summary>
          <br/>
          <i>Como ele usamos o javascript no servidor.</i>
        </details>
      </h6>
    </td>
    <td align="center">
      <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/">
        <img src="https://skillicons.dev/icons?i=js" width="65px" alt="Javascript icon"/><br>
        <sub>
          <b>
            <pre>Javascript</pre>
          </b>
        </sub>
      </a>
      <h6>
        <details>
          <summary>Motivo</summary>
          <br/>
          <i>Ele √© a base do React.js.</i>
        </details>
      </h6>
    </td>
    <td align="center">
      <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/">
        <img src="https://skillicons.dev/icons?i=css" width="65px" alt="CSS3 icon"/><br>
        <sub>
          <b>
            <pre>CSS3</pre>
          </b>
        </sub>
      </a>
      <h6>
        <details>
          <summary>Motivo</summary>
          <br/>
          <i>Usado para deixar as p√°ginas bonitas.</i>
        </details>
      </h6>
    </td>
    <td align="center">
      <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/">
        <img src="https://skillicons.dev/icons?i=html" width="65px" alt="HTML5 icon"/><br>
        <sub>
          <b>
            <pre>HTML5</pre>
          </b>
        </sub>
      </a>
      <h6>
        <details>
          <summary>Motivo</summary>
          <br/>
          <i>Usado para estruturar as p√°ginas.</i>
        </details>
      </h6>
    </td>
     <td align="center">
      <a href="https://pt-br.reactjs.org/">
        <img src="https://skillicons.dev/icons?i=react" width="65px" alt="React icon"/><br>
        <sub>
          <b>
            <pre>ReactJS</pre>
          </b>
        </sub>
      </a>
      <h6>
        <details>
          <summary>Motivo</summary>
          <br/>
          <i>Performace e agilidade na constru√ß√£o das p√°ginas</i>
        </details>
      </h6>
    </td>
  </tr>
</table>

## üóìÔ∏è Etapas
<details open="">
<summary><h1> 1¬™ Sprint</h1></summary>
<br>

<details>
<summary><b>[Usu√°rio] Cadastro do usu√°rio</b></summary>
<br>
<h3 >Nessa etapa, o usu√°rio realizar√° o cadastro para obter acesso ao sistema</h3>
<hr>
    <ul>
        <li>
            <h4>Campos necess√°rios para o cadastro inicial:</h4>
            <ul>
                <li>Nome do usu√°rio (obrigat√≥rio)</li>
                <li>Email (obrigat√≥rio)</li>
                <li>Senha (obrigat√≥rio)</li>
            </ul>
        </li>
        <li>
            <h4>Ser√£o informadas mensagens de erro em casos de:</h4>
            <ul>
                <li>Campos obrigat√≥rios em branco</li>
                <li>E-mail informado j√° existir cadastrado</li>
            </ul>
        </li>
        <li>
            <h4>Ser√° informada mensagem de sucesso:</h4>
            <ul>
                <li>Ap√≥s realizado o cadastro com sucesso o usu√°rio receber√° uma mensagem de confirma√ß√£o e um bot√£o para ser redirecionado para a p√°gina de Login.</li>
            </ul>
        </li>
    </ul>
</details>

<details>
<summary><b>[Usu√°rio] Login do usu√°rio</b></summary>
<h3>Nessa etapa, o usu√°rio ser√° capaz de realizar login no Dashboard, afim de acessar o sistema.</h3>
<hr>
<ul>
    <li>
        <h4>Campos obrigat√≥rios para o login:</h4>
        <ul dir="auto">
            <li>E-mail</li>
            <li>Senha</li>
        </ul>
    </li>
    <li>
        <h4>Ser√° informadas mensagens de erro em casos de:</h4>
        <ul>
            <li>Campos obrigat√≥rios em branco</li>
            <li>E-mail n√£o existe no cadastro</li>
            <li>Senha incorreta para o e-mail</li>
        </ul>
    </li>
    <li>
        <h4>Ap√≥s realiza√ß√£o de login com sucesso:</h4>
        <ul>
            <li>Cria√ß√£o de token de autentica√ß√£o ap√≥s valida√ß√£o dos dados (credenciais) de acesso (e-mail e senha).</li>
            <li>
            Ser√° ser retornado ao navegador o token de autentica√ß√£o de forma que possa ser utilizado em outras funcionalidades que exigem autentica√ß√£o. O usu√°rio dever√° ser redirecionado para a home do sistema
            </li>
        </ul>
    </li>
</ul>
</details>

<details>
<summary><b>[Dashboard] Home e Menu</b></summary>
<h3>Nessa se√ß√£o do sistema, ser√° exibida ao us√∫ario uma tela inicial, afim de poder navegar atrav√©s do menu.</h3>
<hr>
    <ul>
        <li>
        <h4 dir="auto">Crit√©rios de aceite</h4>
            <ul>
                <li>Apenas usu√°rios autenticados dever√£o conseguir acessar esta p√°gina</li>
            </ul>
        </li>
        <li>
            <h4 dir="auto">Esta tela tem uma imagem padr√£o de usu√°rio e o primeiro nome do usu√°rio no canto superior direito, que ao clicar, abrir√° um menu com dois bot√µes:</h4>
            <ul dir="auto">
                <li>O primeiro √© o "Editar", que abre um modal de atualiza√ß√£o do cadastro do usu√°rio logado.</li>
                <li>O segundo √© o bot√£o "Sair", que desloga o usu√°rio do sistema</li>
            </ul>
            </li>
        <li>
            <h4 dir="auto">Do lado esquerdo, h√° um Menu lateral contendo os links que permitir√° o usu√°rio navegar pelos m√≥dulos do sistema:</h4>
            <ul dir="auto">
                <li>Home</li>
                <li>Clientes</li>
                <li>Cobran√ßas</li>
            </ul>
        </li>
        <li>
            <h4 dir="auto">Esta tela tem 8 cards com as seguintes informa√ß√µes:</h4>
            <ul dir="auto">
                <h5 dir="auto">Resumo do Valor Total das Cobran√ßas</h5>
                <li>
                    <p dir="auto">Pagas</p>
                </li>
                <li>
                    <p dir="auto">Vencidas</p>
                </li>
                <li>
                    <p dir="auto">Previstas</p>
                </li>
                <h5 dir="auto">Pr√©via de categorioas</h5>
                <li>
                    <p dir="auto">Cobran√ßas Vencidas</p>
                </li>
                <li>
                    <p dir="auto">Cobran√ßas Previstas</p>
                </li>
                <li>
                    <p dir="auto">Cobran√ßas Pagas</p>
                </li>
                <li>
                    <p dir="auto">Clientes Inadimplentes</p>
                </li>
                <li>
                    <p dir="auto">Clientes Em dia</p>
                </li>
            </ul>
        </li>
    </ul>
</details>

<details>
<summary><b>[Usu√°rio] Edi√ß√£o do usu√°rio logado</b></summary>
<h3 tabindex="-1" dir="auto">Quando logado, o usu√°rio poder√° editar seus dados no sistema.</h3>
<hr/>
    <ul dir="auto">
        <li>
            <h4 dir="auto">Crit√©rios de aceite</h4>
            <ul dir="auto">
                <li>Para acessar este formul√°rio de cadastro √© exigido autentica√ß√£o.</li>
                <li>Atrav√©s de um clique no perfil da Dashboard ser√£o abertos dois bot√µes:
                <ul dir="auto">
                    <li>Editar</li>
                    <li>Sair</li>
                </ul>
                </li>
                <li>Ao clicar em "Editar" o formul√°rio de edi√ß√£o dos dados do usu√°rio ser√° aberto.</li>
                <li>Ao abrir o formul√°rio, os dados do usu√°rio logado ser√£o carregados nos respectivos campos</li>
           </ul>
        <li>
            <h4 dir="auto">O usu√°rio poder√° atualizar os respectivos dados a seguir:</h4>
            <ul dir="auto">
                <li>Nome do usu√°rio (obrigat√≥rio)</li>
                <li>E-mail (obrigat√≥rio)</li>
                <li>Senha (obrigat√≥rio - apenas se for alterar a senha)</li>
                <li>CPF</li>
                <li>Telefone</li>
            </ul>
        <li>
            <h4 dir="auto">Ser√£o informadas mensagens de erro em casos de:</h4>
            <ul dir="auto">
                <li>Campos obrigat√≥rios passados em branco</li>
                <li>E-mail informado for diferente do usu√°rio logado e j√° existir cadastrado para outro usu√°rio</li>
            </ul>
        </li>
        <li>
        <h4 dir="auto">Ap√≥s realizado a atualiza√ß√£o com sucesso o usu√°rio receber√° uma mensagem de confirma√ß√£o</h4>
        </li>
    </ul>
</details>

<details>
<summary><b>[Cliente] Cadastro do cliente</b></summary>
<h3 tabindex="-1" dir="auto">Nessa se√ß√£o o us√°rio poder√° cadastrar clientes, afim de acessar suas informa√ß√µes no futuro.</h3>
<hr />
<ul dir="auto">
    <li>
        <h4 dir="auto">Crit√©rios de aceite</h4>
        <ul dir="auto">
            <li>
            <p dir="auto">Para acessar este formul√°rio de cadastro dever√° ser exigida autentica√ß√£o</p>
            </li>
            <li>
            <p dir="auto">Campos necess√°rios para o cadastro (<b>*</b> obrigat√≥rios):</p>
                <ul dir="auto">
                    <li>Nome do usu√°rio (<b>*</b>)</li>
                    <li>Email (<b>*</b>)</li>
                    <li>Cpf (<b>*</b>)</li>
                    <li>Telefone (<b>*</b>)</li>
                    <li>Cep</li>
                    <li>Logradouro</li>
                    <li>Complemento</li>
                    <li>Bairro</li>
                    <li>Cidade</li>
                    <li>Estado</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <h4 dir="auto">Opcionalmente, poder√° ter a busca do endere√ßo ao digitar o CEP utilizando a api do ViaCEP</h4>
    </li>
    <li>
        <h4 dir="auto">Ser√° informadas mensagens de erro em casos de:</h4>
        <ul dir="auto">
            <li>Campos obrigat√≥rios em branco</li>
            <li>E-mail informado j√° existir cadastrado</li>
        </ul>
    <li>
        <h4 dir="auto">Ap√≥s realizado a atualiza√ß√£o com sucesso o usu√°rio receber√° uma mensagem de confirma√ß√£o</h4>
    </li>
</ul>
</details>

<details>
<summary><b>[Dashboard] Configura√ß√£o do Deploy</b></summary>
<h3 tabindex="-1" dir="auto">Na posi√ß√£o de usu√°rio do sistema, devo ser capaz de acessar o sistema atrav√©s da internet, afim de usar o sistema em qualquer dispositivo com acesso a internet.</h3>
<hr>
<ul dir="auto">
    <li>
        <p dir="auto"><b>Crit√©rios de aceite</b></p>
        <ul dir="auto">
            <li>O frontend poder√° ser hospedado na <b>Netlify</b></li>
            <li>O backend e banco de dados poder√° ser hospedado na <b>Cyclic</b></li>
            <li>O frontend hospedado dever√° ser <b>integrado</b> ao backend tamb√©m hospedado</li>
        </ul>
    </li>
</ul>
</details>



## üìù Sobre
##### Este projeto consiste em sistema de gerenciamento de cobran√ßas.


### üìÑ P√°ginas e Rotas

#### A aplica√ß√£o tem um total de 3 componentes de p√°gina, sendo eles:

  - `pages/index`: Essa √© a Home da aplica√ß√£o, onde o usu√°rio pode efetuar o LogIn/LogOut, e adicionar produtos ao carrinho. Os produtos s√£o buscados da base de dados utilizando o conceito de **SSR**;
  - `pages/checkout`: Essa √© a p√°gina de revis√£o da compra, onde o usu√°rio pode remover produtos do carrinho e seguir com o pagamento, sendo redirecionado para o ambiente de teste do Stripe - uma p√°gina de pagamento;
  - `pages/success`: Ap√≥s ter preenchido os dados e efetuado o pagamento na p√°gina do Stripe, o usu√°rio ser√° redirecionado para essa p√°gina, que √© a de confirma√ß√£o e agradecimento pela compra.
 
#### A aplica√ß√£o tem um total de 5 componentes de rota, sendo eles:

  - `pages/api/auth/[...nextauth]`: Esse √© o arquivo de configura√ß√µes globais do NextAuth;
  - `pages/api/checkout_sessions`: Essa rota √© respons√°vel por transformar os dados da compra recebidos no formato que o Stripe exige, e criar uma sess√£o no Stripe para o usu√°rio. _Exemplo de uso:_ `pages/checkout`;
  - `pages/api/getCategories`: Essa rota √© respons√°vel por retornar as categorias dos produtos da base de dados. _Exemplo de uso:_ `utils/fetchCategories`;
  - `pages/api/getProducts`: Essa rota √© respons√°vel por retornar os produtos da base de dados. _Exemplo de uso:_ `utils/fetchProducts`;
  - `pages/api/getSession`: Essa rota √© respons√°vel por retornar uma sess√£o a partir do id recebido. _Exemplo de uso:_ `utils/fetchLineProducts`.

### üìë Demais Componentes

#### A aplica√ß√£o tamb√©m conta com mais 17 componentes, sendo eles:

  - `pages/_app`: Nesse componente ficam configura√ß√µes globais da aplica√ß√£o, como os contextos do Redux e do NextAuth que envolvem toda a aplica√ß√£o, estilos globais, e a renderiza√ß√£o dos toasts;
  - `pages/_document`: Resumidamente, nesse componente ficam as configura√ß√µes de **SEO** da aplica√ß√£o.

  <br/>

  - `components/Button`: Esse componente √© relativo ao bot√£o reaproveitado periodicamente durante a aplica√ß√£o;
  - `components/Cart`: Esse componente √© relativo ao √≠cone de carrinho que aparece quando existe algum item no carrinho e o scroll est√° baixo de 400;
  - `components/CheckoutProduct`: Esse componente √© relativo aos produtos mostrados na `pages/checkout`;
  - `components/Currency`: Esse componente √© respons√°vel pela formata√ß√£o de moeda dos pre√ßos;
  - `components/Header`: Esse componente √© relativo ao cabe√ßalho da aplica√ß√£o;
  - `components/Product`: Esse componente √© relativo aos produtos mostrados no `pages/index`.

  <br/>

  - `redux/cartSlice`: Utilizando o Redux, nesse componente est√° a l√≥gica usada para lidar com as a√ß√µes de intera√ß√£o do usu√°rio em rela√ß√£o ao sistema de shopping. Ele exporta fun√ß√µes de extrema import√¢ncia, como `addToCart` e `removeFromCart` (que s√£o autoexplicativas), e valores como `selectCartProducts` (total de produtos no carrinho), e dentre outros, que s√£o usados periodicamente pelo projeto;
  - `redux/store`: Esse √© o arquivo de configura√ß√µes do Redux.

  <br/>

  - `utils/api-helpers`: A ideia desse componente √© a de agilizar e reutilizar determinados processos feitos na `pages/api`, componentizando-os nesse componente. Por enquanto ele exporta apenas a `fetchPostJSON`, respons√°vel por agilizar requisi√ß√µes POST;
  - `utils/fetchCategories`: Esse componente respons√°vel por agilizar a busca pelas categorias dos produtos na base de dados;
  - `utils/fetchProducts`: Esse componente respons√°vel por agilizar a busca pelos produtos na base de dados;
  - `utils/fetchLineProducts`: Esse componente, trabalhando em conjunto com a `pages/api/getSession`, √© respons√°vel por retornar os produtos baseado no id enviado, e juntos eles realizam a verifica√ß√£o do id e podem retornar 404 caso esteja incorreto;
  - `utils/get-stripejs`: Esse componente √© respons√°vel por inicializar o Stripe, usando o **Sigleton Pattern** para n√£o inicializ√°-lo mais de uma vez.

<br/>

  - `sanity`: Esse √© o arquivo de configura√ß√µes do Sanity. Ele tamb√©m exporta a `urlFor`, fun√ß√£o que auxilia na exibi√ß√£o das imagens dos produtos da base de dados;
  - `apple-store-database`: Essa √© a base de dados do projeto, criada utilizando o Sanity.

## üìñ Clonando o Projeto

Para clonar e executar este projeto em seu computador, voc√™ precisar√° do [Git](https://git-scm.com/) e [Node.js v18.12.1](https://nodejs.org/en/) ou superior previamente instalados.<br>
Feito isso, no terminal:

```bash
# Clone esse reposit√≥rio com:
> git clone https://github.com/Luk4x/apple-store.git

# Entre no reposit√≥rio com:
> cd apple-store
```

Estando agora na raiz do projeto, crie o arquivo `.env.local`, que deve conter as seguintes vari√°veis de ambiente:

```bash
NEXT_PUBLIC_BASE_URL=http://localhost:3000
NEXT_PUBLIC_SANITY_DATASET=production
NEXT_PUBLIC_SANITY_PROJECT_ID=
SANITY_API_TOKEN=

NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=
```

Para configurar tais vari√°veis, voc√™ precisar√° criar um projeto no [Sanity](https://www.sanity.io/), [Stripe](https://stripe.com/en-br/) e [Google Cloud](https://cloud.google.com/), al√©m de que precisar√° preencher a base de dados tamb√©m.<br/>
Feito isso:

```bash
# Instale as depend√™ncias com:
> npm install
> cd apple-store-database
> npm install

# Execute o projeto com:
> npm run dev
> cd ..
> npm run dev

# Feito isso, voc√™ j√° poder√° estar acessando o projeto em: http://localhost:3000
```
<p align="right">
  <a href="#%EF%B8%8F-apple-store-project">Voltar ao Topo</a>
</p>
